<div class="item-card" (click)="onCardClick()">
  <div class="item-image">
    <img 
      [src]="item.images && item.images.length > 0 ? item.images[0] : getDefaultImage()" 
      [alt]="item.name"
      (error)="onImageError($event)"
      loading="lazy"
    />
    <app-availability-badge 
      [status]="item.availability.status || 'available'"
      size="small"
      class="badge-overlay"
    ></app-availability-badge>
  </div>
  
  <div class="item-content">
    <h3 class="item-name">{{item.name}}</h3>
    
    <!-- Category -->
    <span class="item-category-small" *ngIf="item.category">{{item.category}}</span>
    
    <p class="item-description">{{item.description}}</p>
    
    <!-- Rating Section -->
    <div class="item-rating">
      <div class="stars">
        <span 
          *ngFor="let star of [1,2,3,4,5]" 
          class="star"
          [class.filled]="star <= getRating()"
          [class.empty]="star > getRating()">
          ★
        </span>
      </div>
      <span class="rating-value">{{getRating() | number:'1.1-1'}}</span>
      <span class="review-count" *ngIf="getReviewCount() > 0">({{getReviewCount()}})</span>
    </div>
    
    <div class="item-footer">
      <div class="item-price">
        <span>₹{{item.price || 0}}</span>
      </div>
      
      <button 
        *ngIf="showReviewButton()"
        [class]="getReviewButtonClass()" 
        (click)="onReviewAction($event)"
      >
        {{getReviewButtonText()}}
      </button>
      
      <span *ngIf="isOwner" class="owner-label">
        Your Item
      </span>
    </div>
  </div>
</div>
