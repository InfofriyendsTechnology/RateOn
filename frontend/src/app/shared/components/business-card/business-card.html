<div class="business-card" (click)="onBusinessClick()">
  <div class="business-image">
    <img 
      *ngIf="business.images && business.images.length > 0"
      [src]="business.images[0]" 
      [alt]="business.name"
      (error)="onImageError($event)"
      loading="lazy"
    />
    <div *ngIf="!business.images || business.images.length === 0" class="no-image-placeholder">
      <lucide-icon [img]="ImageOff" [size]="48"></lucide-icon>
      <span>No Image Available</span>
    </div>
  </div>
  
  <div class="business-content">
    <!-- Rating Section - at top -->
    <div class="business-rating">
      <div class="stars">
        <span 
          *ngFor="let star of [1,2,3,4,5]" 
          class="star"
          [class.filled]="star <= displayAverageRating"
          [class.empty]="star > displayAverageRating">
          â˜…
        </span>
      </div>
      <span class="rating-value">{{displayAverageRating | number:'1.1-1'}}</span>
    </div>
    
    <div class="name-category-row">
      <h3 class="business-name">{{business.name}}</h3>
      <span class="business-category" *ngIf="business.category">{{business.category}}</span>
    </div>
    
    <!-- Location -->
    <div class="business-location" *ngIf="business.address?.city">
      <lucide-icon [img]="MapPin" [size]="14"></lucide-icon>
      <span>{{business.address?.city}}{{business.address?.state ? ', ' + business.address?.state : ''}}</span>
    </div>
    
    <p class="business-description">{{business.description}}</p>
    
    <!-- Footer: Stats + Button -->
    <div class="business-footer">
      <div class="business-stats">
        <div class="stat-item">
          <span class="stat-count">{{displayItemsCount}}</span>
          <span class="stat-label">Items</span>
        </div>
        <div class="stat-item">
          <span class="stat-count">{{displayReviewCount}}</span>
          <span class="stat-label">Reviews</span>
        </div>
      </div>
      
      <button class="btn-write-review" [class.has-review]="hasUserReview" (click)="onWriteReview($event)">
        <lucide-icon [img]="Edit" [size]="16"></lucide-icon>
        <span>{{getReviewButtonText()}}</span>
      </button>
    </div>
  </div>
</div>
