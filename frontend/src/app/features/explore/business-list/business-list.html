<div class="business-list-container">
  <!-- Header with Search Icon -->
  <div class="header">
    <div class="header-content">
      <div class="title-section">
        <h1>Explore Businesses</h1>
        <p>Find the best items reviewed by our community</p>
      </div>
      <div class="header-actions">
        <button class="icon-btn" (click)="toggleSearch()" [class.active]="showSearch">
          <lucide-icon [img]="Search" [size]="20"></lucide-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- Expandable Search Bar -->
  <div class="search-container" *ngIf="showSearch">
    <div class="search-box">
      <lucide-icon [img]="Search" [size]="20" class="search-icon"></lucide-icon>
      <input 
        type="text" 
        [(ngModel)]="searchQuery" 
        (input)="onSearch()" 
        placeholder="Search businesses by name..."
        class="search-input"
        #searchInput
      />
      <button *ngIf="searchQuery" class="clear-search-btn" (click)="clearSearch()">
        <lucide-icon [img]="X" [size]="16"></lucide-icon>
      </button>
    </div>
    
    <!-- Optional Filters (shown only when search is active) -->
    <div class="quick-filters" *ngIf="searchQuery">
      <button 
        *ngFor="let cat of categories.slice(0, 5)" 
        class="filter-chip"
        [class.active]="selectedCategory === cat"
        (click)="toggleCategory(cat)"
      >
        {{cat}}
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Loading businesses...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error">
    <p>{{error}}</p>
    <button (click)="loadBusinesses()" class="retry-btn">Retry</button>
  </div>

  <!-- Business Grid -->
  <div *ngIf="!loading && !error" class="businesses-grid">
    <div *ngIf="filteredBusinesses.length === 0" class="no-results">
      <p>No businesses found</p>
    </div>

    <app-business-card 
      *ngFor="let business of filteredBusinesses" 
      [business]="business"
    ></app-business-card>
  </div>

  <!-- Pagination -->
  <div *ngIf="!loading && filteredBusinesses.length > 0" class="pagination">
    <button 
      (click)="previousPage()" 
      [disabled]="page === 1"
      class="page-btn"
    >
      ← Previous
    </button>

    <div class="page-numbers">
      <button 
        *ngFor="let p of [].constructor(totalPages); let i = index"
        (click)="goToPage(i + 1)"
        [class.active]="page === i + 1"
        class="page-num"
      >
        {{i + 1}}
      </button>
    </div>

    <button 
      (click)="nextPage()" 
      [disabled]="page === totalPages"
      class="page-btn"
    >
      Next →
    </button>
  </div>
</div>

