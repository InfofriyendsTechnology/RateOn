<div class="landing-page">
  <!-- Unified Header for All Users -->
  <header class="modern-header">
    <div class="header-container">
      <div class="header-logo" [routerLink]="['/']">
        <img 
          *ngIf="themeService.isDarkMode()" 
          src="/LOGO_WHITE.png" 
          alt="RateOn" 
        />
        <img 
          *ngIf="!themeService.isDarkMode()" 
          src="/LOGO_BLACK.png" 
          alt="RateOn" 
        />
      </div>
      
      <div class="header-spacer"></div>
      
      <div class="header-actions">
        <!-- Show Login/Signup for non-authenticated users -->
        <div *ngIf="!isLoggedIn" class="auth-buttons">
          <a routerLink="/auth/login" class="btn btn-outline">
            <lucide-icon [img]="LogIn" [size]="18"></lucide-icon>
            <span>Login</span>
          </a>
          <a routerLink="/auth/register" class="btn btn-primary">
            <lucide-icon [img]="UserPlus" [size]="18"></lucide-icon>
            <span>Sign Up</span>
          </a>
        </div>
        
        <!-- User Menu for authenticated users -->
        <div *ngIf="isLoggedIn" class="user-menu">
          <button class="user-avatar-btn" (click)="toggleUserMenu()">
            <img *ngIf="user?.avatar" [src]="user.avatar" alt="Profile" />
            <div *ngIf="!user?.avatar" class="avatar-placeholder-small">
              <lucide-icon [img]="User" [size]="20"></lucide-icon>
            </div>
          </button>
          
          <!-- Dropdown Menu -->
          <div *ngIf="showUserMenu" class="user-dropdown">
            <div class="dropdown-header">
              <p class="dropdown-name">{{ user?.username }}</p>
            </div>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item" (click)="navigateToProfile(); toggleUserMenu()">
              <lucide-icon [img]="User" [size]="18"></lucide-icon>
              <span>Profile</span>
            </button>
            <button class="dropdown-item" (click)="navigateToDashboard(); toggleUserMenu()">
              <lucide-icon [img]="Home" [size]="18"></lucide-icon>
              <span>Home</span>
            </button>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item danger" (click)="openLogoutModal(); toggleUserMenu()">
              <lucide-icon [img]="LogOut" [size]="18"></lucide-icon>
              <span>Logout</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section with Search -->
  <section class="hero-section">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1 class="hero-title">Review What Matters</h1>
      <p class="hero-tagline">Rate specific items, not just businesses. Build trust through transparency and honest feedback.</p>
      
      <!-- Prominent Search Bar -->
      <div class="hero-search">
        <app-search-bar (search)="onSearch($event)"></app-search-bar>
      </div>
      
      <div class="hero-stats">
        <div class="stat-item">
          <lucide-icon [img]="Building2" [size]="24"></lucide-icon>
          <span>{{ totalBusinesses }}+ Businesses</span>
        </div>
        <div class="stat-item">
          <lucide-icon [img]="Package" [size]="24"></lucide-icon>
          <span>{{ totalItems }}+ Items</span>
        </div>
        <div class="stat-item">
          <lucide-icon [img]="Star" [size]="24"></lucide-icon>
          <span>{{ totalReviews }}+ Reviews</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Businesses Section -->
  <section class="section featured-businesses">
    <div class="container">
      <div class="section-header">
        <h2>Featured Businesses</h2>
        <p class="section-subtitle">Discover top-rated places in your area</p>
      </div>
      
      <div *ngIf="loadingBusinesses" class="loading-grid">
        <div class="skeleton-card" *ngFor="let i of [1,2,3,4,5,6]">
          <div class="skeleton-image"></div>
          <div class="skeleton-content">
            <div class="skeleton-line skeleton-title"></div>
            <div class="skeleton-line skeleton-subtitle"></div>
            <div class="skeleton-line skeleton-text"></div>
          </div>
        </div>
      </div>
      
      <div *ngIf="!loadingBusinesses && featuredBusinesses.length > 0" class="businesses-grid">
        <app-business-card 
          *ngFor="let business of featuredBusinesses"
          [business]="business">
        </app-business-card>
      </div>
      
      <div *ngIf="!loadingBusinesses && featuredBusinesses.length === 0" class="empty-state">
        <p>No businesses found</p>
      </div>
      
      <div class="section-footer">
        <button class="btn btn-outline btn-lg" (click)="viewAllBusinesses()">
          View All Businesses
          <lucide-icon [img]="Building2" [size]="20"></lucide-icon>
        </button>
      </div>
    </div>
  </section>

  <!-- Featured Items Section -->
  <section class="section featured-items">
    <div class="container">
      <div class="section-header">
        <h2>Featured Items</h2>
        <p class="section-subtitle">Popular items reviewed by our community</p>
      </div>
      
      <div *ngIf="loadingItems" class="loading-grid">
        <div class="skeleton-card" *ngFor="let i of [1,2,3,4,5,6]">
          <div class="skeleton-image"></div>
          <div class="skeleton-content">
            <div class="skeleton-line skeleton-title"></div>
            <div class="skeleton-line skeleton-subtitle"></div>
            <div class="skeleton-line skeleton-text"></div>
          </div>
        </div>
      </div>
      
      <div *ngIf="!loadingItems && featuredItems.length > 0" class="items-grid">
        <app-item-card 
          *ngFor="let item of featuredItems"
          [item]="item"
          (cardClick)="router.navigate(['/item', $event._id])">
        </app-item-card>
      </div>
      
      <div *ngIf="!loadingItems && featuredItems.length === 0" class="empty-state">
        <p>No items found</p>
      </div>
      
      <div class="section-footer">
        <button class="btn btn-outline btn-lg" (click)="viewAllItems()">
          View All Items
          <lucide-icon [img]="Package" [size]="20"></lucide-icon>
        </button>
      </div>
    </div>
  </section>

  <!-- What is RateOn -->
  <section class="section what-is">
    <div class="container">
      <div class="section-header">
        <h2>What is RateOn?</h2>
        <p class="section-subtitle">A new approach to reviews</p>
      </div>
      <div class="content-grid">
        <div class="content-block">
          <lucide-icon [img]="Target" [size]="32"></lucide-icon>
          <h3>Item-Specific Reviews</h3>
          <p>Review individual products and services, not just businesses. Get precise feedback on what matters.</p>
        </div>
        <div class="content-block">
          <lucide-icon [img]="Shield" [size]="32"></lucide-icon>
          <h3>Verified Trust System</h3>
          <p>Build your reputation through quality reviews. Earn trust scores based on helpfulness and accuracy.</p>
        </div>
        <div class="content-block">
          <lucide-icon [img]="Users" [size]="32"></lucide-icon>
          <h3>Community Driven</h3>
          <p>Connect with real reviewers. Help others make informed decisions through shared experiences.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- How It Works -->
  <section class="section how-it-works">
    <div class="container">
      <div class="section-header">
        <h2>How It Works</h2>
        <p class="section-subtitle">Simple, transparent, effective</p>
      </div>
      <div class="steps">
        <div class="step">
          <div class="step-number">1</div>
          <h3>Find Items</h3>
          <p>Search for specific products or services you want to review or explore.</p>
        </div>
        <div class="step">
          <div class="step-number">2</div>
          <h3>Share Experience</h3>
          <p>Write detailed reviews with ratings, photos, and helpful insights.</p>
        </div>
        <div class="step">
          <div class="step-number">3</div>
          <h3>Build Trust</h3>
          <p>Earn reputation through quality contributions and help others decide.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="section features">
    <div class="container">
      <div class="section-header">
        <h2>Features</h2>
        <p class="section-subtitle">Everything you need to share and discover</p>
      </div>
      <div class="features-grid">
        <div class="feature-card">
          <lucide-icon [img]="Star" [size]="28"></lucide-icon>
          <h3>Detailed Ratings</h3>
          <p>Rate items on multiple dimensions for comprehensive feedback.</p>
        </div>
        <div class="feature-card">
          <lucide-icon [img]="Image" [size]="28"></lucide-icon>
          <h3>Photo Reviews</h3>
          <p>Add images to your reviews to show real experiences.</p>
        </div>
        <div class="feature-card">
          <lucide-icon [img]="MessageSquare" [size]="28"></lucide-icon>
          <h3>Business Responses</h3>
          <p>Direct communication between reviewers and businesses.</p>
        </div>
        <div class="feature-card">
          <lucide-icon [img]="TrendingUp" [size]="28"></lucide-icon>
          <h3>Trust Score</h3>
          <p>Build credibility through consistent, helpful reviews.</p>
        </div>
        <div class="feature-card">
          <lucide-icon [img]="Search" [size]="28"></lucide-icon>
          <h3>Smart Search</h3>
          <p>Find exactly what you're looking for with advanced filters.</p>
        </div>
        <div class="feature-card">
          <lucide-icon [img]="Building2" [size]="28"></lucide-icon>
          <h3>Business Tools</h3>
          <p>Manage items, respond to reviews, and build your brand.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- For Businesses -->
  <section class="section for-businesses">
    <div class="container">
      <div class="section-header">
        <h2>For Business Owners</h2>
        <p class="section-subtitle">Manage your reputation effectively</p>
      </div>
      <div class="business-features">
        <div class="business-card">
          <lucide-icon [img]="Package" [size]="32"></lucide-icon>
          <h3>Item Management</h3>
          <p>Add and manage your products or services. Keep information accurate and up-to-date.</p>
        </div>
        <div class="business-card">
          <lucide-icon [img]="Bell" [size]="32"></lucide-icon>
          <h3>Review Notifications</h3>
          <p>Get instant alerts when customers review your items. Stay responsive and engaged.</p>
        </div>
        <div class="business-card">
          <lucide-icon [img]="BarChart3" [size]="32"></lucide-icon>
          <h3>Analytics Dashboard</h3>
          <p>Track performance, understand feedback trends, and improve your offerings.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Why Choose RateOn -->
  <section class="section why-choose">
    <div class="container">
      <div class="section-header">
        <h2>Why Choose RateOn?</h2>
        <p class="section-subtitle">What makes us different</p>
      </div>
      <div class="reasons">
        <div class="reason">
          <lucide-icon [img]="CheckCircle2" [size]="24"></lucide-icon>
          <div>
            <h3>Granular Reviews</h3>
            <p>Review specific items, not entire businesses. More precise, more useful.</p>
          </div>
        </div>
        <div class="reason">
          <lucide-icon [img]="CheckCircle2" [size]="24"></lucide-icon>
          <div>
            <h3>Trust-Based System</h3>
            <p>Reviewers earn credibility. Quality matters more than quantity.</p>
          </div>
        </div>
        <div class="reason">
          <lucide-icon [img]="CheckCircle2" [size]="24"></lucide-icon>
          <div>
            <h3>Transparent Platform</h3>
            <p>No hidden agendas. Real reviews from real people.</p>
          </div>
        </div>
        <div class="reason">
          <lucide-icon [img]="CheckCircle2" [size]="24"></lucide-icon>
          <div>
            <h3>Easy to Use</h3>
            <p>Clean interface. Simple process. Get started in seconds.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section cta">
    <div class="container">
      <h2 *ngIf="!isLoggedIn">Start Reviewing Today</h2>
      <h2 *ngIf="isLoggedIn">Ready to Share Your Experience?</h2>
      <p *ngIf="!isLoggedIn">Join our community and make your voice heard</p>
      <p *ngIf="isLoggedIn">Find businesses and items to review</p>
      <div class="cta-actions">
        <a *ngIf="!isLoggedIn" routerLink="/auth/register" class="btn btn-primary btn-lg">
          <lucide-icon [img]="UserPlus" [size]="22"></lucide-icon>
          <span>Create Free Account</span>
        </a>
        <button *ngIf="isLoggedIn" class="btn btn-primary btn-lg" (click)="viewAllBusinesses()">
          <lucide-icon [img]="Search" [size]="22"></lucide-icon>
          <span>Explore & Review</span>
        </button>
      </div>
    </div>
  </section>

  <!-- Footer - Simple, No Header Structure -->
  <footer class="footer">
    <div class="footer-center">
      <img 
        *ngIf="themeService.isDarkMode()" 
        src="/LOGO_WHITE.png" 
        alt="RateOn" 
        class="footer-logo" 
        (click)="onLogoClick()"
      />
      <img 
        *ngIf="!themeService.isDarkMode()" 
        src="/LOGO_BLACK.png" 
        alt="RateOn" 
        class="footer-logo" 
        (click)="onLogoClick()"
      />
      <p class="footer-tagline">Honest reviews. Real impact.</p>
      <div class="footer-links">
        <a routerLink="/explore">Explore</a>
        <span class="separator">•</span>
        <a routerLink="/auth/login">Login</a>
        <span class="separator">•</span>
        <a routerLink="/auth/register">Sign Up</a>
        <span class="separator">•</span>
        <a href="#">Privacy</a>
        <span class="separator">•</span>
        <a href="#">Terms</a>
      </div>
      <p class="footer-copyright">&copy; 2026 RateOn. All rights reserved.</p>
    </div>
  </footer>

  <!-- Fixed Theme Toggle Button (Always visible at bottom-right) -->
  <button class="theme-toggle-fixed" (click)="toggleTheme()" aria-label="Toggle theme">
    <lucide-icon *ngIf="themeService.isDarkMode()" [img]="Sun" [size]="24"></lucide-icon>
    <lucide-icon *ngIf="!themeService.isDarkMode()" [img]="Moon" [size]="24"></lucide-icon>
  </button>
</div>

<!-- Logout Confirmation Modal -->
<div *ngIf="showLogoutModal" class="modal-overlay" (click)="closeLogoutModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Logout Confirmation</h3>
      <p>Are you sure you want to logout?</p>
    </div>
    
    <div class="modal-actions">
      <button class="btn-modal-danger" (click)="confirmLogout()">
        <lucide-icon [img]="LogOut" [size]="18"></lucide-icon>
        Logout
      </button>
      <button class="btn-modal-cancel" (click)="closeLogoutModal()">
        Cancel
      </button>
    </div>
  </div>
</div>
