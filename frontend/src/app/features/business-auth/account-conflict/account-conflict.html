<div class="conflict-container">
  <div class="conflict-card">
    <div class="conflict-header">
      <div class="icon-warning">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
      </div>
      
      <h1>Account Already Exists</h1>
      <p class="subtitle">This email is already registered</p>
    </div>

    <div *ngIf="errorMessage" class="alert alert-error">
      {{ errorMessage }}
    </div>

    <div *ngIf="conflictData" class="conflict-info">
      <!-- Existing Account Info -->
      <div class="existing-account-box">
        <div class="profile-card">
          <div class="profile-avatar">
            <img *ngIf="conflictData.googleData?.avatar" 
                 [src]="conflictData.googleData.avatar" 
                 alt="Profile" />
            <div *ngIf="!conflictData.googleData?.avatar" class="avatar-placeholder">
              {{ conflictData.existingUser.username.charAt(0).toUpperCase() }}
            </div>
          </div>
          <div class="profile-info">
            <h3>{{ conflictData.existingUser.username }}</h3>
            <p>{{ conflictData.existingUser.email }}</p>
          </div>
        </div>
      </div>

      <div class="info-box">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
        <div>
          <p><strong>What would you like to do?</strong></p>
          <p>You can either login to your existing User account, or delete it and create a Business account instead.</p>
        </div>
      </div>

      <div class="action-buttons">
        <button 
          class="btn btn-primary" 
          (click)="loginToUserAccount()"
          [disabled]="isLoading">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
            <polyline points="10 17 15 12 10 7"></polyline>
            <line x1="15" y1="12" x2="3" y2="12"></line>
          </svg>
          Login to User Account
        </button>

        <button 
          class="btn btn-danger" 
          (click)="deleteAndContinue()"
          [disabled]="isLoading">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
          </svg>
          {{ isLoading ? 'Deleting...' : 'Delete User & Create Business' }}
        </button>
      </div>

      <div class="cancel-link">
        <button class="btn-link" (click)="cancel()" [disabled]="isLoading">
          ‚Üê Back to Registration
        </button>
      </div>
    </div>

    <div *ngIf="!conflictData && !errorMessage" class="loading">
      <div class="spinner"></div>
      <p>Loading...</p>
    </div>
  </div>
</div>
